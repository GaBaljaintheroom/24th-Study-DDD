# DDD 6장

## 6-1. 표현 계층과 응용 영역
- 표현 영역: 사용자의 요청 해석, 사용자 요구 기능 판별 후 응용 계층의 기능 실행
- 응용 계층: 사용자가 원하는 기능 제공. 기능 실행 필요 값을 인자로 받고 결과 리턴

## 6-2. 응용 서비스의 역할
- 클라이언트(사용자)가 요청한 기능 실행
- 응용 서비스는 리포지터리에서 도매인 객체 가져와 사용
- 트랜잭션 처리도 응용 서비스가 담당해야함 (@Transactional)
- 도메인 로직은 응용 서비스가 아닌 도메인 모델로 분리해야함 (응집성 향상 및 동일 코드 중복 작성 방지)

## 6-3. 응용 서비스의 구현
- 응용 서비스는 디자인 패턴 중 Facade에 해당.
- 한 클래스당 하나의 역할을 가지는 방법 vs 한 클래스에 여러 함수가 있는 방법
- 필자는 전자를 선호하며, 후자의 장점인 공통 로직을 멤버 함수로 뺄 수 있는건 그냥 헬퍼 클래스 만들기
- **응용 서비스는 런타임에 교체하는 경우가 거의 없고 구현 클래스가 두개인 경우도 드물다. 따라서 인터페이스화 하지 말자**
- ~~(읽다가 윗부분 너무 공감돼서 볼드 칠했어요. XXXService, XXXServiceImpl 규탄하라!!)~~
- 필요한 값들 (회원가입이면 이름 이메일 등)을 메서드 파라미터로 받자. 너무 많으면 DTO 클래스를 만들자
- 리턴할때는 표현 영역에서 필요한 데이터만 리턴하자

### 표현 영역에 의존하지 않기
- 표현 영역 기술 (HTTP, gRPC, Servlet 등)을 응용 영역으로 전파시키지 않기

### 트랜잭션 처리
- Service 함수에 @Transactional 달기


## 6-4. 표현 영역
### 역할
- 사용자가 시스템을 사용할 수 있는 흐름 제공, 제어
- 사용자의 세션 관리
- 사용자의 요청을 알맞은 응용 서비스에게 전달, 결과 사용자에게 전달

## 6-5. 값 검증
- 표현 영역에서는 필수 값과 값의 형식 검사
- 응용 영역에서는 Id 중복 여부 등의 논리적 여부 검사
- 여담으로 자바의 타입과 Optional등을 잘 사용하면 null 체크 등을 중복(표현, 응용)으로 할 필요 없을듯.

## 6-6. 권한 검사
- 표현 계층: SpringSecurity + AOP 등읗 활용한 표현 단 검증 (@HasRole 등)
- 응용 계층: 이 도메인 엔티티가 있으면(find != null) 리젝 없으면 생성 같은 경우,,
- 도메인 계층: 실제 도메인 엔티티(애그리거트)를 끄집어내서 그 내부의 값으로 권한 검증

## 6-7. 조회 전용 기능과 응용 서비스
- **응용 서비스가 사용자 요청 기능을 실행하는데 별다른 기여를 하지 못한다면 굳이 서비스를 만들지 않아도 된다**