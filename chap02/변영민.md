# 2. 아키텍쳐 개요

## 2.1 네 개의 영역

1. **표현 영역**: 외부 요청을 받아 응용 영역에 전달
2. **응용 영역**: 사용자에게 필요한 기능을 제공
3. **도메인 영역**: 도메인 모델과 핵심 규칙을 구현
4. **인프라스트럭처 영역**: 데이터베이스, 외부 시스템과의 연동

## 2.2 계층 구조 아키텍처

- `표현 -> 응용 -> 도메인 -> 인프라스트럭처` 계층으로 구성
- 상위 계층은 하위 계층에 의존하지만 반대는 안 됨
- 계층 간 의존을 줄이기 위해 DIP 적용 필요

## 2.3 DIP

- 저수준 모듈이 고수준 모듈에 의존하게 만들어 의존성을 역전시킴
- 인터페이스를 통해 저수준 모듈을 추상화
- 고수준 모듈이 인터페이스를 통해 저수준 모듈을 사용
- 의존성 주입을 통해 모듈 간 결합도를 낮추고 테스트 용이성 향상

## 2.4 도메인 영역의 주요 구성요소

- 엔티티 (Entity): 고유 식별자를 가진 도메인 객체
- 밸류 (Value): 식별자 없이 값 그 자체를 표현
- 애그리거트 (Aggregate): 관련 객체를 묶은 군집, Root Entity로 관리
- 리포지터리 (Repository): 도메인 모델의 영속성을 처리
- 도메인 서비스 (Domain Service): 특정 엔티티에 속하지 않는 도메인 로직

## 2.5 요청 처리 흐름

1. 표현 계층에서 요청을 받아 데이터 검증
2. 응용 계층으로 전달하여 필요한 도메인 객체 호출 및 처리
3. 도메인 계층에서 핵심 로직을 실행
4. 결과를 응용 계층을 통해 표현 계층으로 전달

## 2.6 인프라스트럭처 개요

- 도메인 영역은 인프라 영역에 의존하지 않음
- 편의성을 위해 적절한 의존성은 허용 (@Transactional 등)
- 인프라스트럭처 계층은 외부 시스템과의 연동을 담당
- 데이터베이스 연결, 메시지 큐, 외부 API 호출 등을 구현

## 2.7 모듈 구성

- 각 하위 도메인으로 구성
- 애그리거트를 기준으로 구성
- 패키지 크기는 10~15개가 적절
- 모듈 구조는 도메인의 복잡성과 요구사항에 따라 유연하게 조정
- 코드베이스의 가독성과 유지보수성을 높이기 위해 모듈 분리를 신경 써야 함
