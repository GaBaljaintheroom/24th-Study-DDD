---
marp: true
---

# 1. 도메인 모델 시작하기

___

## 도메인


개발자

→ 요구사항을 올바르게 이해하는 게 중요함

→ 올바르게 이해하기 위해선?

개발자와 전문가가 직접 대화하면서 도메인 지식을 갖춰야 함

---

### ex) 정산 시스템 개발

- 정산 용어 : 선취, 후취 등등
<br>

해당 내용을 이해해야 개발이 가능함.

-> 회계팀(도메인 전문가)과 개발팀이 소통 

---

## 도메인 모델

도메인 모델 : 도메인 자체를 이해하기 위핸 개념 모델

여러 하위 도메인을 하나의 다이어그램에 모델링 하면 안된다

→ 이해하는데 방해된다. 별도로 분리하자

---

## 도메인 모델 패턴

도메인 계층 : 도메인의 핵심 규칙을 구현

처음부터 완벽한 개념 모델을 만들기 보단, 전반적인 개요를 알 수 있는 수준으로 개념 모델을 작성해야 한다. 

<br>

**문서화**

→ 주된 이유는 지식을 공유하기 위함

→ 코드를 이해하는데 시간이 오래 걸리기 때문

도메인 관점에서 코드가 도메인을 잘 표현해야 코드의 가독성이 올라감

---

## 엔티티와 벨류

엔티티 특징

- 식별자를 가진다

벨류 특징

- 불변 특징
    - 참조 투명성

---

### 참조 투명성 (Referential Transparency)

<br>

**참조 투명성**은 함수가 동일한 입력에 대해 항상 동일한 출력을 반환하는 특성

즉, 함수 호출을 해당 결과값으로 바꿔도 프로그램의 의미가 바뀌지 않는다. 

---

### 예시:

```kotlin
fun add(a: Int, b: Int): Int {
    return a + b
}

fun main() {
    val x = 5
    val y = 3

    val result1 = add(x, y) // 8
    val result2 = add(x, y) // 8

    println(result1)
    println(result2)
}

```

---

위 예시에서 `add` 함수는 참조 투명성을 가진다. 

`add(5, 3)`는 항상 `8`을 반환합니다. 

따라서, `val result1 = add(x, y)`를 `val result1 = 8`로 바꿔도 
프로그램의 의미가 바뀌지 않습니다.

---

### 멱등성 (Idempotence)

**멱등성**은 같은 연산을 여러 번 적용해도 결과가 달라지지 않는 특성

예를 들어, 같은 작업을 여러 번 해도 최종 결과가 처음 한 번 한 것과 같다면 그 작업은 멱등성을 가집니다.

---

### 예시:

```kotlin
fun setToZero(list: MutableList<Int>): MutableList<Int> {
    list.replaceAll { 0 }
    return list
}

fun main() {
    val numbers = mutableListOf(1, 2, 3, 4, 5)

    val result1 = setToZero(numbers) // [0, 0, 0, 0, 0]
    val result2 = setToZero(numbers) // [0, 0, 0, 0, 0]

    println(result1)
    println(result2)
}

```

`setToZero` 함수는 리스트의 모든 값을 0으로 만듭니다. 이 함수를 한 번 호출하든, 여러 번 호출하든 리스트는 항상 `[0, 0, 0, 0, 0]`이 됩니다. 따라서 이 함수는 멱등성을 가집니다.

---

### 차이점

- **참조 투명성**: 함수가 동일한 입력에 대해 항상 동일한 결과를 반환합니다. 부작용이 없습니다. 예를 들어, `add(5, 3)`는 항상 `8`을 반환합니다.
- **멱등성**: 동일한 연산을 여러 번 적용해도 결과가 달라지지 않습니다. 예를 들어, `setToZero(numbers)`는 몇 번을 호출해도 리스트를 `[0, 0, 0, 0, 0]`으로 만듭니다.

참조 투명성은 함수의 예측 가능성과 관련이 있고, 멱등성은 연산의 안정성과 관련이 있습니다. 멱등한 연산은 여러 번 실행해도 시스템 상태에 영향을 미치지 않기 때문에 안전합니다.

---

### **DTO 의 get/set 메서드**

<br>

DTO Setter 넣지 말기

→ 흔히 얘기하는 안티 패턴

→ kotlin 에선 어떻게 처리할까??

- 모든 프로퍼티가 val(읽기 전용)로 선언되어 불변성을 유지

---

## 도메인 용어와 유비쿼터스 언어

도메인과 관련된 공통의 언어를 만들면

용어의 모호함, 불필요한 해석 과정을 줄일 수 있다.