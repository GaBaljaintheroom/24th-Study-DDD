# DDD 7장

## 7-1. 여러 애그리거트가 필요한 기능
- 한 애그리거트로 구현 불가능한 기능이 있다. 예를 들어
    - 송금같은 경우 같은 종류의 내용이 다른 두개의 애그리거트 필요
    - 종류가 다른 여러 애그리거트가 로직에 관여
    - 외부의 (infrastructure) 기능이 필요한 로직 포함
- 이를 억지로 애그리거트에 끼워 넣으면 애그리거트가 자신의 책임 범위를 넘어서는 기능 구현할 우려 있음. 따라서,

## 7-2. 도메인 서비스
### 계산 로직과 도메인 서비스
- 여러 애그리거트를 참조하는 "도메인 서비스"를 만들어서, Order 계산등에 활용하자!
- 이 도메인 서비스는 응용 서비스가 실행할수도 있고, 애그리거트에서 인자로 받아 실행할 수도 있다.
- But, @AutoWired 같은걸 활용한 "객체의 필드에 주입"은 하지 않는다. 그 도메인 서비스는 애그리거트의 구성요소도 아니고, 모든 기능에서 해당 필드를 필요로 하지도 않기 때문.

### 외부 시스템 연동과 도메인 서비스
- 타 서비스 연동 (HTTP일수도 있고 뭐 gRPC 일수도 있고...) 을 형상화한 인터페이스 형태!
- 도메인 로직 관점에서의 인터페이스여야한다. 그게 HTTP여서 뭐 `retrieveFromServer` 약간 이런 형태가 아니라, 실질적으로 "뭘 하는지" 에 대한 행위 관점..?
- 물론 이 친구의 실제 구현체는 infrastructure 레이어에 존재한다.

### 특정 기술에 종속되는 도메인 서비스
- 크게 예를 들면 JWT라던지, ULID Generator 라던지..
- 는 위 외부 시스템과 마찬가지로 인터페이스로 도메인 서비스를 만들고, 실제 구현은 infrastructure에서 한다

### 번외. 이게 도메인 서비스에요 응용 서비스에요?
- 도메인 서비스: 애그리거트의 상태를 변경하거나, 그 값을 가지고 계산하는 등의 로직
- 응용 서비스: 그걸 제외한 나머지 것들 (실질적인 도메인 로직이 아닌..)
